// ============================================
// Table Component Styles
// Enterprise-grade data table with sorting
// ============================================

@use '../../styles/abstracts/variables' as v;
@use '../../styles/abstracts/mixins' as m;

// Variables
$table-border-radius: var(--radius-md);
$table-header-bg: var(--color-surface-elevated);
$table-border-color: var(--color-border);

// ============================================
// Container
// ============================================
.table-container {
  position: relative;
  width: 100%;
  overflow-x: auto;
  border: 1px solid $table-border-color;
  border-radius: $table-border-radius;
  background: var(--color-surface);
}

// ============================================
// Base Table
// ============================================
.table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-family-base);
  font-size: v.$font-size-sm;
  color: var(--color-text-primary);
}

// ============================================
// Header
// ============================================
.table__head {
  background: var(--color-surface-elevated, #f9fafb);
  border-bottom: 2px solid var(--color-border, #e5e7eb);
}

.table__header {
  padding: var(--space-md, 1rem);
  text-align: left;
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-secondary, #6b7280);
  white-space: nowrap;
  user-select: none;

  &--sortable {
    cursor: pointer;
    transition: background-color var(--transition-fast, 150ms);

    &:hover {
      background: rgba(0, 0, 0, 0.05);
    }
  }

  &--sorted {
    color: var(--color-primary, #2563eb);
  }
}

.table__header-content {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
}

// ============================================
// Sort Icon
// ============================================
.table__sort-icon {
  display: inline-flex;
  align-items: center;
  color: var(--color-text-muted);
  transition: color var(--transition-fast);

  &.sort-asc,
  &.sort-desc {
    color: var(--color-primary);
  }

  &.sort-inactive {
    opacity: 0.3;
  }
}

// ============================================
// Body
// ============================================
.table__body {
  .table__row {
    border-bottom: 1px solid $table-border-color;
    transition: background-color var(--transition-fast);

    &:last-child {
      border-bottom: none;
    }
  }
}

.table__cell {
  padding: var(--space-md);
  vertical-align: middle;
}

// ============================================
// Empty State
// ============================================
.table__empty-row {
  .table__empty {
    padding: var(--space-xl);
    text-align: center;
    color: var(--color-text-secondary);
    font-style: italic;
  }
}

// ============================================
// Loading State
// ============================================
.table--loading {
  pointer-events: none;
  
  .table {
    opacity: 0.5;
  }
}

.table__loading {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.7);
  z-index: 10;
}

.table__spinner {
  width: 2rem;
  height: 2rem;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

// ============================================
// Variants
// ============================================

// Striped rows
.table--striped {
  .table__body .table__row:nth-child(even) {
    background: var(--color-surface-elevated);
  }
}

// Hoverable rows
.table--hoverable {
  .table__body .table__row {
    cursor: pointer;

    &:hover {
      background: var(--color-primary-light);
    }
  }
}

// Compact mode
.table--compact {
  .table__header,
  .table__cell {
    padding: var(--space-sm) var(--space-md);
  }
}

// ============================================
// Pagination
// ============================================
.table__pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-md);
  padding: var(--space-md);
  border-top: 1px solid $table-border-color;
  background: $table-header-bg;
}

.table__pagination-btn {
  padding: var(--space-sm) var(--space-md);
  font-family: var(--font-family-base);
  font-size: v.$font-size-sm;
  font-weight: 500;
  color: var(--color-primary);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);

  &:hover:not(:disabled) {
    background: var(--color-primary-light);
    border-color: var(--color-primary);
  }

  &:disabled {
    color: var(--color-text-muted);
    cursor: not-allowed;
    opacity: 0.5;
  }
}

.table__pagination-info {
  font-size: v.$font-size-sm;
  color: var(--color-text-secondary);
}

// ============================================
// Responsive
// ============================================
@include m.respond-to('sm') {
  .table {
    font-size: v.$font-size-base;
  }
}
